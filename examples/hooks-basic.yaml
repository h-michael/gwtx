## yaml-language-server: $schema=https://raw.githubusercontent.com/h-michael/gwtx/main/schema/gwtx.schema.json

# Basic hooks examples
# SECURITY: Hooks require explicit trust via `gwtx trust` before execution
# PLATFORM: Hooks are currently supported on Unix-like systems (Linux, macOS) only

# Pre-add hooks: Execute before creating worktree
hooks:
  pre_add:
    - command: echo 'Preparing worktree setup...'

    - command: ./scripts/pre-setup.sh
      description: Run pre-setup script

  # Post-add hooks: Execute after worktree setup completes
  post_add:
    - command: echo 'Worktree {{worktree_name}} created at {{worktree_path}}'

    - command: ./scripts/post-setup.sh {{worktree_path}}
      description: Run post-setup script

  # Pre-remove hooks: Execute before removing worktree
  pre_remove:
    - command: echo 'Cleaning up {{worktree_name}}...'

    - command: ./scripts/pre-cleanup.sh {{worktree_path}}
      description: Run pre-cleanup script

  # Post-remove hooks: Execute after worktree removal
  post_remove:
    - command: echo 'Removed worktree {{worktree_name}}'

    - command: ./scripts/cleanup.sh
      description: Run cleanup script

# Template variables (automatically escaped for shell safety):
#   {{worktree_path}}   - Full path to the worktree
#   {{worktree_name}}   - Worktree directory name
#   {{branch}}          - Branch name
#   {{repo_root}}       - Repository root path
#
# Note: Each hook entry has:
#   command     (required) - Shell command to execute
#   description (optional) - Shown during execution instead of command
#
# Hook execution order:
#   Add:    pre_add → git worktree add → mkdir/link/copy → post_add
#   Remove: pre_remove → git worktree remove → post_remove
#
# Failure handling:
#   pre_add/pre_remove failure:  Aborts the operation
#   post_add/post_remove failure: Shows warning, operation continues
