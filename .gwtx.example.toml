# gwtx configuration file
# Copy this file to .gwtx.toml and customize for your project.

# Global options
# [options]
# on_conflict = "backup"  # abort, skip, overwrite, backup
                          # default: prompt interactively (error if non-interactive)

# Create directories in the new worktree
# [[mkdir]]
# path = "build"                        # required, relative to worktree
# description = "Build output directory"  # optional

# Create symbolic links from repository root to worktree
# [[link]]
# source = ".env.local"                 # required, relative to repo root
# target = ".env.local"                 # optional, defaults to source
# on_conflict = "skip"                  # optional, overrides global
# description = "Local environment"     # optional

# [[link]]
# source = ".envrc"
# description = "direnv configuration"

# Glob pattern support: link multiple files at once
# [[link]]
# source = "fixtures/*"                 # glob pattern: matches all files in fixtures/
# skip_tracked = true                   # optional, skip git-tracked files (e.g., .gitkeep)
# description = "Link untracked test fixtures"

# Copy files from repository root to worktree
# [[copy]]
# source = ".env.example"               # required, relative to repo root
# target = ".env"                       # optional, defaults to source
# on_conflict = "backup"                # optional, overrides global
# description = "Environment file"      # optional

# Hooks: Execute commands before/after worktree operations
# SECURITY: Hooks require explicit trust via `gwtx trust` before execution
# [hooks]
# pre_add = [
#     "echo 'Preparing worktree setup...'",
#     "./scripts/pre-setup.sh"
# ]
# post_add = [
#     "mise install",                    # Install tools via mise
#     "direnv allow",                    # Trust direnv configuration
#     "cd {{worktree_path}} && npm install"  # Install dependencies
# ]
# pre_remove = [
#     "echo 'Cleaning up {{worktree_name}}...'"
# ]
# post_remove = [
#     "./scripts/cleanup.sh"
# ]
#
# Template variables (safe and recommended):
#   {{worktree_path}}   - Full path to the worktree (e.g., /path/to/worktrees/feature-foo)
#   {{worktree_name}}   - Worktree directory name (e.g., feature-foo)
#   {{branch}}          - Branch name (e.g., feature/foo)
#   {{repo_root}}       - Repository root path
#
# Variables are automatically escaped for shell safety.
#
# Example usage:
#   post_add = [
#       "echo 'Setting up {{worktree_name}} on branch {{branch}}'",
#       "cd {{worktree_path}} && npm install",
#       "./scripts/post-setup.sh"
#   ]
